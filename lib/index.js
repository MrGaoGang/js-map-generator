module.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e,r){"use strict";t.exports=r(3)},function(t,e,r){"use strict";t.exports=r(4)},function(t,e,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function u(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,a,s=u(t),f=1;f<arguments.length;f++){for(var l in r=Object(arguments[f]))o.call(r,l)&&(s[l]=r[l]);if(n){a=n(r);for(var c=0;c<a.length;c++)i.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},function(t,e,r){"use strict";
/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */r(2);var n=r(1),o=60103;if(e.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;o=i("react.element"),e.Fragment=i("react.fragment")}var u=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function f(t,e,r){var n,i={},f=null,l=null;for(n in void 0!==r&&(f=""+r),void 0!==e.key&&(f=""+e.key),void 0!==e.ref&&(l=e.ref),e)a.call(e,n)&&!s.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===i[n]&&(i[n]=e[n]);return{$$typeof:o,type:t,key:f,ref:l,props:i,_owner:u.current}}e.jsx=f,e.jsxs=f},function(t,e,r){"use strict";
/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(2),o=60103,i=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var u=60109,a=60110,s=60112;e.Suspense=60113;var f=60115,l=60116;if("function"==typeof Symbol&&Symbol.for){var c=Symbol.for;o=c("react.element"),i=c("react.portal"),e.Fragment=c("react.fragment"),e.StrictMode=c("react.strict_mode"),e.Profiler=c("react.profiler"),u=c("react.provider"),a=c("react.context"),s=c("react.forward_ref"),e.Suspense=c("react.suspense"),f=c("react.memo"),l=c("react.lazy")}var p="function"==typeof Symbol&&Symbol.iterator;function h(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d={};function v(t,e,r){this.props=t,this.context=e,this.refs=d,this.updater=r||y}function x(){}function m(t,e,r){this.props=t,this.context=e,this.refs=d,this.updater=r||y}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(h(85));this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=v.prototype;var g=m.prototype=new x;g.constructor=m,n(g,v.prototype),g.isPureReactComponent=!0;var b={current:null},_=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,r){var n,i={},u=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(u=""+e.key),e)_.call(e,n)&&!C.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var f=Array(s),l=0;l<s;l++)f[l]=arguments[l+2];i.children=f}if(t&&t.defaultProps)for(n in s=t.defaultProps)void 0===i[n]&&(i[n]=s[n]);return{$$typeof:o,type:t,key:u,ref:a,props:i,_owner:b.current}}function w(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var O=/\/+/g;function j(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function S(t,e,r,n,u){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var s=!1;if(null===t)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case i:s=!0}}if(s)return u=u(s=t),t=""===n?"."+j(s,0):n,Array.isArray(u)?(r="",null!=t&&(r=t.replace(O,"$&/")+"/"),S(u,e,r,"",(function(t){return t}))):null!=u&&(w(u)&&(u=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(u,r+(!u.key||s&&s.key===u.key?"":(""+u.key).replace(O,"$&/")+"/")+t)),e.push(u)),1;if(s=0,n=""===n?".":n+":",Array.isArray(t))for(var f=0;f<t.length;f++){var l=n+j(a=t[f],f);s+=S(a,e,r,l,u)}else if("function"==typeof(l=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=p&&t[p]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),f=0;!(a=t.next()).done;)s+=S(a=a.value,e,r,l=n+j(a,f++),u);else if("object"===a)throw e=""+t,Error(h(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return s}function R(t,e,r){if(null==t)return t;var n=[],o=0;return S(t,n,"","",(function(t){return e.call(r,t,o++)})),n}function k(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var T={current:null};function E(){var t=T.current;if(null===t)throw Error(h(321));return t}var P={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:n};e.Children={map:R,forEach:function(t,e,r){R(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return R(t,(function(){e++})),e},toArray:function(t){return R(t,(function(t){return t}))||[]},only:function(t){if(!w(t))throw Error(h(143));return t}},e.Component=v,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,e.cloneElement=function(t,e,r){if(null==t)throw Error(h(267,t));var i=n({},t.props),u=t.key,a=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,s=b.current),void 0!==e.key&&(u=""+e.key),t.type&&t.type.defaultProps)var f=t.type.defaultProps;for(l in e)_.call(e,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==f?f[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){f=Array(l);for(var c=0;c<l;c++)f[c]=arguments[c+2];i.children=f}return{$$typeof:o,type:t.type,key:u,ref:a,props:i,_owner:s}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:t},t.Consumer=t},e.createElement=M,e.createFactory=function(t){var e=M.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:s,render:t}},e.isValidElement=w,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:k}},e.memo=function(t,e){return{$$typeof:f,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return E().useCallback(t,e)},e.useContext=function(t,e){return E().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return E().useEffect(t,e)},e.useImperativeHandle=function(t,e,r){return E().useImperativeHandle(t,e,r)},e.useLayoutEffect=function(t,e){return E().useLayoutEffect(t,e)},e.useMemo=function(t,e){return E().useMemo(t,e)},e.useReducer=function(t,e,r){return E().useReducer(t,e,r)},e.useRef=function(t){return E().useRef(t)},e.useState=function(t){return E().useState(t)},e.version="17.0.2"},function(t,e,r){"use strict";CanvasRenderingContext2D.prototype.fillTextVertical=function(t,e,r){var n=this,o=(n.canvas,t.split("")),i=o.map((function(t){return n.measureText(t).width})),u=n.textAlign,a=n.textBaseline;"left"===u?e+=Math.max.apply(null,i)/2:"right"===u&&(e-=Math.max.apply(null,i)/2),"bottom"===a||"alphabetic"===a||"ideographic"===a?r-=i[0]/2:"top"!==a&&"hanging"!==a||(r+=i[0]/2),n.textAlign="center",n.textBaseline="middle",o.forEach((function(o,u){var a=i[u];o.charCodeAt(0)<=256?(n.translate(e,r),n.rotate(90*Math.PI/180),n.translate(-e,-r)):u>0&&t.charCodeAt(u-1)<256&&(r+=i[u-1]/2),n.fillText(o,e,r),n.setTransform(1,0,0,1,0,0);a=i[u];r+=a})),n.textAlign=u,n.textBaseline=a}},function(t,e,r){"use strict";r.r(e),r.d(e,"MapItem",(function(){return u})),r.d(e,"ItemGridSize",(function(){return a})),r.d(e,"ItemGridValue",(function(){return s})),r.d(e,"Point",(function(){return f})),r.d(e,"getGridCount",(function(){return l})),r.d(e,"MainMap",(function(){return _})),r.d(e,"DetailMap",(function(){return S}));var n=r(0),o=r(1),i=r.n(o),u=function(t,e){this.value=t,this.color=e},a=10,s=10,f=function(t,e){this.x=t,this.y=e};function l(t){return Math.floor(t/s)}function c(t){return Math.round(Math.random()*t)}var p=function(){function t(t,e,r,n){this.value=t,this.name=e,this.xCount=r,this.yCount=n,this.frontierCount=0,this.frontiers={},this.color="white",this._loopCount=0}return t.prototype._getContiguous=function(t){return[[0,1],[0,-1],[1,0],[-1,0]].map((function(e){return{x:t.x+e[0],y:t.y+e[1]}}))},t.prototype._getSkewContiguous=function(t){return[[-1,1],[1,-1],[1,1],[-1,-1]].map((function(e){return{x:t.x+e[0],y:t.y+e[1]}}))},t.prototype.changeMapItem=function(t,e,r){var n=t[e][r];n&&(n.value=this.value,n.color=this.color)},t.prototype.getMapInfo=function(){var t=Object.keys(this.frontiers),e=[],r=[];return t.forEach((function(t){var n=t.split(":");e.push(parseInt(n[0])),r.push(parseInt(n[1]))})),{x:e,y:r}},t.prototype.getCenterMap=function(){var t=this.getMapInfo(),e=t.x.reduce((function(t,e){return t+e}),0),r=t.y.reduce((function(t,e){return t+e}),0);return{x:Math.floor(e/t.x.length),y:Math.floor(r/t.y.length)}},t.prototype.getSpaceMapEdge=function(t){for(var e=this.getCenterMap(),r=this._getContiguous(e)[c(3)],n=0;n<this.xCount;){if(n++,t[r.x][r.y]&&-1===t[r.x][r.y].value)return r;r=this._getContiguous(r)[c(3)]}return{x:-1,y:-1}},t.prototype.filterCanUse=function(t,e){var r=this;return e.filter((function(e){return!(e.x<0||e.y<0||e.x>=r.xCount||e.y>=r.yCount)&&(!t[e.x][e.y]||-1===t[e.x][e.y].value)}))},t.prototype.fill=function(t,e){if(this._loopCount>=this.xCount*this.yCount*2/3)console.log("超出查询最大的次数");else{this._loopCount++,e.x>0&&e.y>0&&t[e.x]&&t[e.x][e.y]&&-1===t[e.x][e.y].value&&(this.frontierCount++,this.frontiers[e.x+":"+e.y]=!0,this.changeMapItem(t,e.x,e.y));var r=this._getContiguous({x:e.x,y:e.y}),n=this.filterCanUse(t,r);if(0===n.length){var o=this._getSkewContiguous(e),i=this.filterCanUse(t,o);if(0===i.length&&this.frontierCount<=1)return void this.fill(t,r[c(3)]);r=o,n=i}for(var u=0;u<n.length;u++){var a=n[u];this.changeMapItem(t,a.x,a.y),this.frontiers[a.x+":"+a.y]=!0,this.frontierCount++}if(this.frontierCount<this.value){var s=Object.keys(this.frontiers).length,f=c(this.frontierCount-1);if(-1!==f&&s>0){var l=Object.keys(this.frontiers)[f].split(":").map((function(t){return parseInt(t)}));this.fill(t,{x:l[0],y:l[1]})}else if(Object.keys(this.frontiers).length>0){l=Object.keys(this.frontiers)[c(Object.keys(this.frontiers).length)].split(":").map((function(t){return parseInt(t)}));this.fill(t,{x:l[0],y:l[1]})}else{var p=r;(l=p[c(p.length-1)])&&p.length>1&&this.fill(t,{x:l.x,y:l.y})}}}},t}();r(5);function h(t,e){for(var r=t.canvas.width,n=t.canvas.height,o=Math.floor(n/e),i=Math.floor(r/e),u=0;u<o;u++)t.beginPath(),t.moveTo(0,e*u-.5),t.lineTo(r,e*u-.5),t.strokeStyle="#ccc",t.stroke();for(var a=0;a<i;a++)t.beginPath(),t.moveTo(e*a,0),t.lineTo(e*a,n),t.strokeStyle="#ccc",t.stroke()}var y;!function(t){t[t.T=0]="T",t[t.TXR=1]="TXR",t[t.R=2]="R",t[t.RXB=3]="RXB",t[t.B=4]="B",t[t.BXL=5]="BXL",t[t.L=6]="L",t[t.LXT=7]="LXT"}(y||(y={}));var d,v=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),x=10,m=function(t){function e(e){var r=t.call(this,e)||this;return r.draw=function(){for(var t=0;t<r.numXs;t++)for(var e=0;e<r.numYs;e++){var n=r.dataMap[t][e];n&&-1!==n.value&&r.drawGridTile(t,e,n.color)}if(r.props.showLabel)for(var o=0;o<r.labelQueue.length;o++){var i=r.labelQueue[o];r.drawLabel(i)}},r.drawLabel=function(t){var e=t.center,n=t.name,o=t.textColor,i=r.props.label;r.ctx&&(i?(r.ctx.fillStyle=o||"black",r.ctx.font=i.fontSize+" "+i.fontFamily+" "+i.fontWeight):(r.ctx.fillStyle=o||"black",r.ctx.font="14px bold")),"verticel"===(null==i?void 0:i.labelDirection)?r.ctx.fillTextVertical(n,e.x*x,e.y*x):r.ctx.fillText(n,e.x*x,e.y*x)},r.initDataMap=function(t){var e=t.canvas.width,n=t.canvas.height,o=Math.floor(n/x),i=Math.floor(e/x);r.numYs=o,r.numXs=i;for(var u=0;u<r.numXs;u++){for(var a=[],s=0;s<r.numYs;s++)a.push({color:"white",value:-1,name:""});r.dataMap.push(a)}},r.registerListener=function(){var t;null===(t=r.canvasRef.current)||void 0===t||t.addEventListener("click",(function(t){var e,n,o,i=((e=t).layerX||0===e.layerX?(n=e.layerX,o=e.layerY):(e.offsetX||0===e.offsetX)&&(n=e.offsetX,o=e.offsetY),{x:n,y:o}),u=r.getEventInWhereMap(i);if(-1!==u.index){var a=r.labelQueue[u.index];r.props.callback&&r.props.callback(a)}}))},r.canvasRef=i.a.createRef(),r.numXs=0,r.numYs=0,r.dataMap=[],r.ctx=null,r.labelQueue=[],x=e.gridSize||10,r}return v(e,t),e.prototype.doRender=function(){return Object(n.jsx)("div",{children:"please rewrite do render!"},void 0)},e.prototype.doDidMounted=function(){},e.prototype.drawGridTile=function(t,e,r){var n=t*x,o=e*x;this.ctx&&(this.ctx.fillStyle=r||"transparent",this.ctx.clearRect(n,o,x,x),this.ctx.fillRect(n,o,x,x))},e.prototype.getEventInWhereMap=function(t){for(var e=Math.floor(t.x/x),r=Math.floor(t.y/x),n=0;n<this.labelQueue.length;n++){var o=this.labelQueue[n];if(o.positions[e+":"+r])return{id:o.id,index:n}}return{index:-1,id:""}},e.prototype.componentDidMount=function(){var t=this.canvasRef.current.getContext("2d");this.ctx=t,this.doDidMounted()},e.prototype.render=function(){return this.doRender()},e}(o.Component),g=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b=10,_=function(t){function e(e){var r=t.call(this,e)||this;return r.canvasRef=i.a.createRef(),r.numXs=0,r.numYs=0,r.dataMap=[],r.ctx=null,r.labelQueue=[],r}return g(e,t),e.prototype.doDidMounted=function(){var t=this;if(this.ctx){var e=this.props,r=e.mapColorRandom,n=e.gridSize,o=e.showLine,i=e.lifeCycle;b=n||10,this.initDataMap(this.ctx),this.registerListener(),o&&h(this.ctx,b),this.props.mapData&&(this.labelQueue=[],setTimeout((function(){i&&i.beforeMounted&&i.beforeMounted()})),this.props.mapData.forEach((function(e,n){var o=null,i=new p(e.value,e.name,t.numXs,t.numYs);i.color=r?function(){for(var t=Math.floor(16777216*Math.random()).toString(16);t.length<6;)t="0"+t;return"#"+t}():e.color||"";var u=new f(Math.floor(t.numXs/2),Math.floor(t.numYs/2));void 0!==e.direction&&(o=function(t,e){var r=t.length,n=t[0].length,o=Math.floor(r/2),i=Math.floor(n/2),u={x:-1,y:-1};function a(t){return-1===t.value}if(e===y.T||e===y.B){for(var s=i;e===y.T?s>=0:s<n;e===y.T?s--:s++){if(a(t[o][s]))return{x:o,y:s}}return u}if(e===y.R||e===y.L){for(var f=0;e===y.R?f<r:f>=0;e===y.R?f++:f--){if(a(t[f][i]))return{x:f,y:i}}return u}for(var l=Math.min(i,o),c=0;c<l;c++){if(e===y.RXB){if(a(t[o+c][i+c]))return{x:o+c,y:i+c}}else if(e===y.TXR){if(a(t[o+c][i-c]))return{x:o+c,y:i-c}}else if(e===y.BXL){if(a(t[o-c][i+c]))return{x:o-c,y:i+c}}else{if(e!==y.LXT)break;if(a(t[o-c][i-c]))return{x:o-c,y:i-c}}}return u}(t.dataMap,e.direction),console.log(e.direction,"====",o),o=-1!==o.x?o:u),i.fill(t.dataMap,o&&-1!==o.x?o:u),t.labelQueue.push({center:i.getCenterMap(),name:i.name,id:i.name,color:i.color,positions:i.frontiers,index:n,textColor:e.textColor||"",datas:e.children||[]})}))),this.draw(),setTimeout((function(){i&&i.mounted&&i.mounted(t.labelQueue)}))}},e.prototype.doRender=function(){var t=this.props,e=t.mapWidth,r=void 0===e?1e3:e,o=t.mapHeight,i=void 0===o?500:o;return Object(n.jsx)("canvas",{ref:this.canvasRef,width:r,height:i,style:{width:r+"px",height:i+"px"}},void 0)},e}(m),C=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function M(t){return Math.round(Math.random()*t)}var w=function(t){function e(e,r,n,o){return t.call(this,e,r,n,o)||this}return C(e,t),e.prototype.fillReaming=function(t){for(var e=0;e<this.xCount;e++)for(var r=0;r<this.yCount;r++)0===t[e][r].value&&(this.frontiers[e+":"+r]=!0,this.changeMapItem(t,e,r))},e.prototype.fillWithRow=function(t,e){var r=0;if("average"===e)for(var n=0;n<this.yCount;n++)for(var o=0;o<this.xCount;o++)0===t[o][n].value&&r<=this.value&&(this.frontiers[o+":"+n]=!0,this.changeMapItem(t,o,n),r++);else for(o=0;o<this.xCount;o++)for(n=0;n<this.yCount;n++)0===t[o][n].value&&r<=this.value&&(this.frontiers[o+":"+n]=!0,this.changeMapItem(t,o,n),r++)},e.prototype.filterCanUse=function(t,e){var r=this;return e.filter((function(e){return!(e.x<0||e.y<0||e.x>=r.xCount||e.y>=r.yCount)&&(!t[e.x][e.y]||!(-1===t[e.x][e.y].value||t[e.x][e.y].value>0))}))},e.prototype.fill=function(t,e){if(this._loopCount>=this.xCount*this.yCount*2/3)console.log("inner超出查询最大的次数");else{this._loopCount++,e.x>0&&e.y>0&&t[e.x]&&t[e.x][e.y]&&0===t[e.x][e.y].value&&(this.frontiers[e.x+":"+e.y]=!0,this.changeMapItem(t,e.x,e.y),this.frontierCount++);var r=this._getContiguous({x:e.x,y:e.y}),n=this.filterCanUse(t,r);if(0===n.length){var o=this._getSkewContiguous(e);if(0===this.filterCanUse(t,o).length)return void this.fill(t,r[M(3)])}for(var i=0;i<n.length;i++){var u=n[i];this.changeMapItem(t,u.x,u.y),this.frontiers[u.x+":"+u.y]=!0,this.frontierCount++}if(this.frontierCount<this.value){var a=Object.keys(this.frontiers).length,s=M(a-1);if(-1!==s&&a>0){var f=Object.keys(this.frontiers)[s].split(":").map((function(t){return parseInt(t)}));this.fill(t,{x:f[0],y:f[1]})}else if(Object.keys(this.frontiers).length>0){f=Object.keys(this.frontiers)[M(Object.keys(this.frontiers).length)].split(":").map((function(t){return parseInt(t)}));this.fill(t,{x:f[0],y:f[1]})}else{var l=this._getContiguous(e);(f=l[M(l.length-1)])&&l.length>1&&this.fill(t,{x:f.x,y:f.y})}}}},e}(p),O=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=10,S=function(t){function e(e){return t.call(this,e)||this}return O(e,t),e.prototype.clearGrid=function(){for(var t=0;t<this.numXs;t++)for(var e=0;e<this.numYs;e++){var r=t*j,n=e*j;this.ctx&&this.ctx.clearRect(r,n,j,j)}this.props.showLine&&this.ctx&&h(this.ctx,j)},e.prototype.clearMap=function(){for(var t=0;t<this.numXs;t++)for(var e=0;e<this.numYs;e++)this.dataMap[t][e].value=-1},e.prototype.componentWillUpdate=function(t){t!==this.props&&(j=t.gridSize||10,this.updateMap(t),this.clearGrid(),this.draw())},e.prototype.updateMap=function(t){var e=this;if(t.center&&t.positions){var r=Math.floor(this.numXs/2),n=Math.floor(this.numYs/2),o=t.center,i=t.color,u=o.x-r,a=o.y-n;this.clearMap();for(var s=0;s<this.numXs;s++)for(var l=0;l<this.numYs;l++)t.positions[s+u+":"+(l+a)]&&(this.dataMap[s][l].value=0,this.dataMap[s][l].color=i)}var c=t.showType,p=t.mapColorRandom,h=t.lifeCycle;"average"!==c&&"random-fill"!==c&&"average-vertical"!==c||(this.labelQueue=[],setTimeout((function(){h&&h.beforeMounted&&h.beforeMounted()})),(t.datas||[]).forEach((function(r,n){var o=new w(r.value,r.name,e.numXs,e.numYs);o.color=p?function(){for(var t=Math.floor(16777216*Math.random()).toString(16);t.length<6;)t="0"+t;return"#"+t}():r.color||"","average"===c||"average-vertical"===c?o.fillWithRow(e.dataMap,c):"random-fill"===t.showType&&(n===t.datas.length-1?o.fillReaming(e.dataMap):o.fill(e.dataMap,new f(Math.floor(e.numXs/2),Math.floor(e.numYs/2)))),e.labelQueue.push({center:o.getCenterMap(),name:o.name,id:o.name,color:o.color,positions:o.frontiers,index:n,textColor:r.textColor||"",datas:r.children||[]})})),setTimeout((function(){h&&h.mounted&&h.mounted(e.labelQueue)})))},e.prototype.doDidMounted=function(){if(this.ctx){var t=this.props,e=t.showLine,r=t.gridSize;j=void 0===r?10:r,this.initDataMap(this.ctx),this.registerListener(),e&&h(this.ctx,j)}},e.prototype.doRender=function(){var t=this.props,e=t.mapWidth,r=void 0===e?1e3:e,o=t.mapHeight,i=void 0===o?500:o;return Object(n.jsx)("canvas",{ref:this.canvasRef,width:r,height:i,style:{width:r+"px",height:i+"px"}},void 0)},e}(m)}]);